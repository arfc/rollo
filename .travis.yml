language: python

install:
- sudo apt-get install python3-sphinx

script:
  # Use Sphinx to make the html docs
  - make -C docs/ html
  # Tell GitHub not to use jekyll to compile the docs
  - touch docs/build/html/.nojekyll

# Tell Travis CI to copy the documentation to the gh-pages branch of
# your GitHub repository.
deploy:
  - provider: pypi
    user: "__token__"
    password: $PYPI_TOKEN
    skip_existing: true
  - provider: pages:git
    verbose: true
    token: $GITHUB_TOKEN
    edge: true
    local_dir: ./docs/build/html/
    keep_history: true
